(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{354:function(t,e,r){"use strict";r.r(e);r(5);var n,o=r(0),c=(r(73),r(107)),h=r(74),l=h.helpers.regex("alpha",/^((\+7|7|8)+(\()+([0-9]){3})+(\))+([0-9]{3})+(-)+([0-9]{2})+(-)+([0-9]{2})$/),d={name:"LoginPage",middleware:"auth",mixins:[c.validationMixin],validations:{phone:{required:h.required,phoneAlpha:l},code:{required:h.required}},data:function(){return{phone:"",code:""}},computed:{phoneErrors:function(){var t=[];return this.$v.phone.$dirty?(!this.$v.phone.required&&t.push("Обязательное поле!"),!this.$v.phone.phoneAlpha&&t.push("Номер телефона не валиден! +7(___)___-__-__"),t):t},codeErrors:function(){var t=[];return this.$v.code.$dirty?(!this.$v.code.required&&t.push("Обязательное поле!"),t):t}},methods:{filterPhone:function(){return this.phone.replace(/[^0-9]/g,"")},login:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$v.$touch(),!this.$v.$error){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.$store.dispatch("auth/login",{phone:this.filterPhone(),password:this.code});case 5:t.sent.access_token?this.$router.push("/profile"):this.$store.dispatch("fetchNotification",{isActive:!0,type:"error",message:"Неверный логин или пароль"});case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},beforeRouteLeave:function(t,e,r){this.$store.dispatch("fetchMenu",!1),this.$store.dispatch("fetchCityModal",!1),this.$store.dispatch("fetchCallbackModal",!1),r()}},f=r(3),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",[r("section",{staticClass:"section section--full-screen d-flex f-column align-center justify-center"},[t._m(0),r("div",{staticClass:"container d-flex align-center justify-center"},[r("form",{staticClass:"form form--auth form--login"},[r("div",{staticClass:"form--card"},[r("div",{staticClass:"form--card-inner"},[r("m-input",{class:{"input--error":t.phoneErrors.length>0},attrs:{inputId:"phone",placeholder:"+7(___)___-__-__",value:t.phone,required:!0,footerText:t.phoneErrors[0],mask:"+#(###)###-##-##"},on:{input:function(e){t.phone=e,t.$v.phone.$touch()},blur:function(e){return t.$v.phone.$touch()}}}),r("m-input",{class:{"input--error":t.codeErrors.length>0},attrs:{inputId:"code",placeholder:"Пароль:",value:t.code,footerText:t.codeErrors[0],type:"password"},on:{input:function(e){t.code=e},blur:function(e){return t.$v.code.$touch()}}}),r("div",{staticClass:"button button_brand",on:{click:t.login}},[r("div",{staticClass:"button--text"},[t._v("Войти")])]),r("nuxt-link",{staticClass:"link",attrs:{to:"/reset-password"}},[t._v("Забыли пароль?")])],1)])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("h1",{staticClass:"section--title text--center"},[this._v("Войти")])])}],!1,null,null,null);e.default=component.exports}}]);