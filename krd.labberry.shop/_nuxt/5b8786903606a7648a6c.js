(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{327:function(t,e,r){"use strict";var c={name:"MInstaBlockComponent"},n=r(3),component=Object(n.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"section--block section--block_info"},[r("h2",{staticClass:"section--title"},[t._v(t._s(t.c.additionalfields.instagram_title))]),r("p",{staticClass:"section--text"},[t._v(t._s(t.c.additionalfields.instagram_text))]),r("a",{staticClass:"button",attrs:{href:t.c.additionalfields.instagram,target:"_blank"}},[r("div",{staticClass:"button--text"},[t._v("Instagram")])]),r("div",{staticClass:"item--image"},[r("img",{attrs:{src:"/"+t.c.additionalfields.instagram_image,alt:t.c.additionalfields.instagram_title}})])])}),[],!1,null,null,null);e.a=component.exports},328:function(t,e,r){"use strict";var c={name:"MInfoBlockComponent",computed:{about:function(){return this.$store.getters["pages/getAboutPage"]}}},n=r(3),component=Object(n.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"section--block section--block_info"},[r("h2",{staticClass:"section--title"},[t._v(t._s(t.about.additionalfields.info_title))]),r("p",{staticClass:"section--text"},[t._v(t._s(t.about.additionalfields.info_text))]),r("a",{staticClass:"button",attrs:{href:t.about.additionalfields.link_info}},[r("div",{staticClass:"button--text"},[t._v("Подробнее")])]),r("div",{staticClass:"item--image"},[r("img",{attrs:{src:"/"+t.about.additionalfields.info_image,alt:t.about.additionalfields.info_title}})])])}),[],!1,null,null,null);e.a=component.exports},329:function(t,e,r){"use strict";var c=r(328),n=r(327),o={name:"MSectionInfo",components:{mInfoBlock:c.a,mInstaBlock:n.a}},l=r(3),component=Object(l.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"section",attrs:{id:"section--info"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"section--blocks grid grid--xl-2 grid--md-1"},[e("m-info-block"),e("div",{staticClass:"section--block-divider"}),e("m-insta-block")],1)])])}),[],!1,null,null,null);e.a=component.exports},330:function(t,e,r){"use strict";var c={name:"MItemProductComponent",props:{items:{type:Array,default:function(){return[]}}},data:function(){return{title:"",price:null,item:{},size:"m"}},mounted:function(){var t=this;this.items.forEach((function(e){"m"===e.size&&(t.item=e,t.size=e.size)}))},methods:{changeSize:function(t){this.item=t,this.size=t.size},addToCart:function(){var t=this.items[0];return this.item.id&&(t=this.item),this.$store.dispatch("cart/addToCart",t),localStorage.setItem("cart",JSON.stringify(this.$store.getters["cart/getCart"])),ym(this.$store.getters.getContext.ya_num,"reachGoal","korzina"),gtag("event","click",{event_category:"korzina"}),!0}}},n=r(3),component=Object(n.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item--product"},[r("div",{staticClass:"item--product-wrapper"},[r("div",{staticClass:"item--product-wrapper_inner"},[r("div",{staticClass:"item--media"},[t._l(t.items,(function(e,i){return r("nuxt-link",{key:i,staticClass:"item--product-inner item--product-image",class:{"item--product-image_active":e.size===t.size},attrs:{to:"/catalog/"+(e.categorySlug||"category")+"/"+e.slug}},[r("div",{staticClass:"item--media-inner"},[r("div",{staticClass:"item--image"},[r("img",{staticClass:"item--image-element",attrs:{src:"/"+e.productfields.image,alt:e.title}})])]),e.popular?r("div",{staticClass:"item--flag item--flag_popular"},[r("img",{attrs:{src:"/images/popular-flag.svg"}})]):t._e()])})),r("div",{staticClass:"item--product-inner"},t._l(t.items,(function(e,i){return r("nuxt-link",{key:i,staticClass:"item--product-title",class:{"item--product-title_active":e.size===t.size},attrs:{to:"/catalog/"+(e.categorySlug||"category")+"/"+e.slug}},[r("h3",[t._v(t._s(e.productfields.title))])])})),1)],2),r("div",{staticClass:"item--content"},[r("div",{staticClass:"item--product-inner item--product-sizes"},t._l(t.items,(function(e,i){return r("div",{key:i,staticClass:"link--icon item--product-size",class:{"item--product-size_active":e.size===t.size},on:{click:function(r){return t.changeSize(e)}}},[t._v(t._s(e.size))])})),0),r("div",{staticClass:"item--product-inner"},t._l(t.items,(function(e,i){return r("nuxt-link",{key:i,staticClass:"item--product-price",class:{"item--product-price_active":e.size===t.size},attrs:{to:"/catalog/"+(e.categorySlug||"category")+"/"+e.slug}},[e.productfields.old_price?t._e():r("div",{staticClass:"item--product-price_old_disable"}),e.productfields.old_price?r("div",{staticClass:"item--product-price_old"},[r("span",{staticClass:"item--product-price-current"},[t._v(t._s(e.productfields.old_price)+" ₽")]),r("span",{staticClass:"item--product-price-discount"},[t._v(t._s(e.price-e.productfields.old_price))])]):t._e(),r("div",{staticClass:"item--product-price-wrapper"},[t._v(t._s(e.price)+" ₽")])])})),1)])]),r("div",{staticClass:"item--product-actions"},[r("button",{staticClass:"button button_brand",on:{click:t.addToCart}},[r("div",{staticClass:"button--text"},[t._v("В корзину")])])])])])}),[],!1,null,null,null);e.a=component.exports},335:function(t,e,r){"use strict";var c={name:"MFilterComponent",data:function(){return{value:[0,1e4],newSort:!0,priceAsc:!1,priceDesc:!1,isCategoryAccordeon:!1}},computed:{filteredOnDesktopCategory:function(){var t="Клубничные букеты",e="Клубничные боксы",r="Комбо-наборы",c='Линейка "Classic"';return this.categories.filter((function(n){return n.productfields.title.trim()!==t&&n.productfields.title.trim()!==e&&n.productfields.title.trim()!==r&&n.productfields.title.trim()!==c}))}},methods:{filter:function(){var t={priceRange:this.value,newSort:this.newSort?"DESC":"ASC",priceSort:this.priceAsc?"ASC":"DESC"};this.$emit("filter",t)}}},n=r(3),component=Object(n.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"section section--filter"},[r("div",{staticClass:"container"},[r("div",{staticClass:"filter"},[r("div",{staticClass:"filter--wrapper"},[r("div",{staticClass:"filter--inner filter--inner_desktop"},[r("div",{staticClass:"filter--item"},[r("m-route-link",{attrs:{text:"Все категории",link:"/catalog"}})],1),r("div",{staticClass:"filter--item"},[r("m-route-link",{attrs:{text:"Клубничные букеты",link:"/catalog/klubnichnie-bukety"}})],1),r("div",{staticClass:"filter--item"},[r("m-route-link",{attrs:{text:"Клубничные боксы",link:"/catalog/klubnichnie-boksi"}})],1),r("div",{staticClass:"filter--item"},[r("m-route-link",{attrs:{text:"Комбо-наборы",link:"/catalog/kombo-nabori"}})],1),r("div",{staticClass:"filter--item"},[r("m-route-link",{attrs:{text:'Линейка "Classic"',link:"/catalog/lyneika-classic"}})],1),r("div",{staticClass:"filter--item",on:{click:function(e){t.isCategoryAccordeon=!t.isCategoryAccordeon}}},[r("span",{staticClass:"filter--item-show-more link"},[t._v("Показать еще"),r("svg",{staticClass:"filter--item-show-more-icon",class:{"filter--item-show-more-icon_active":t.isCategoryAccordeon},attrs:{width:"15",height:"9",viewBox:"0 0 15 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M1 1L7.74074 8L14 1",stroke:"#333333"}})])])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isCategoryAccordeon,expression:"isCategoryAccordeon"}],staticClass:"filter--inner filter--inner_accordeon"},t._l(t.filteredOnDesktopCategory,(function(t,i){return r("div",{key:i,staticClass:"filter--item"},[r("m-route-link",{attrs:{text:t.productfields.title,link:"/catalog/"+t.slug}})],1)})),0),r("div",{staticClass:"filter--inner filter--inner_mobile"},[r("div",{staticClass:"filter--item"},[r("m-route-link",{attrs:{text:"Все категории",link:"/catalog"}})],1),t._l(t.categories,(function(t,i){return r("div",{key:i,staticClass:"filter--item"},[r("m-route-link",{attrs:{text:t.productfields.title,link:"/catalog/"+t.slug}})],1)}))],2),r("div",{directives:[{name:"show",rawName:"v-show",value:t.online,expression:"online"}],staticClass:"filter--delimetr"}),r("div",{directives:[{name:"show",rawName:"v-show",value:t.online,expression:"online"}],staticClass:"filter--inner filter--inner_sorting"},[r("div",{staticClass:"filter--item"},[t._v("Сортировать:")]),r("div",{staticClass:"filter--item"},[r("div",{staticClass:"link",class:{"link-active":t.newSort},on:{click:function(e){t.newSort=!t.newSort,t.priceAsc=!1,t.priceDesc=!1,t.filter()}}},[t._v("По новинкам")])]),r("div",{staticClass:"filter--item"},[r("div",{staticClass:"link",class:{"link-active":t.priceAsc},on:{click:function(e){t.priceAsc=!t.priceAsc,t.priceDesc=!1,t.newSort=!1,t.filter()}}},[t._v("Цена по возрастанию")])]),r("div",{staticClass:"filter--item"},[r("div",{staticClass:"link",class:{"link-active":t.priceDesc},on:{click:function(e){t.priceAsc=!1,t.priceDesc=!t.priceDesc,t.newSort=!1,t.filter()}}},[t._v("Цена по убыванию")])]),r("div",{staticClass:"filter--item filter--range"},[r("div",[t._v("Фильтр по цене:")]),r("div",{staticClass:"input--range"},[r("vue-slider",{attrs:{"enable-cross":!1,max:1e4,interval:500},on:{"drag-end":t.filter},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])])])])])])}),[],!1,null,null,null);e.a=component.exports},359:function(t,e,r){"use strict";r.r(e);r(5);var c,n,o=r(0),l=r(335),d=r(330),m=r(329),f={name:"CategoryPage",components:{mFilter:l.a,mItemProduct:d.a,mSectionInfo:m.a},computed:{categories:function(){return this.$store.getters["products/getCatalog"]}},asyncData:(n=Object(o.a)(regeneratorRuntime.mark((function t(e){var r,c,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.req,r=e.store,c=e.params,n=r.getters.getContext.token,t.next=4,r.dispatch("products/fetchCategory",{params:{filter:{where:{slug:c.category,userId:r.getters.getContext.id,published:!0},include:[{association:"productfields"},{association:"children",include:["productfields"]}]}},headers:{"x-api-key":n}});case 4:return o=r.getters["products/getCategory"],t.next=7,r.dispatch("products/fetchProducts",{params:{filter:{order:[["new","DESC"],["menuindex","ASC"]],where:{resourcetypeId:2,level:3,parentId:o.id,published:!0},include:[{association:"productfields"},{order:[["new","DESC"],["menuindex","ASC"]],association:"children",include:["productfields"]},"parent"]}},headers:{"x-api-key":n}});case 7:return l=r.getters["products/getProducts"],t.abrupt("return",{category:o,products:l});case 9:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)}),head:function(){return{title:this.category.title||"Категория",htmlAttrs:{lang:this.category.lang||"ru"},meta:[{hid:"description",name:"description",content:this.category.description}]}},methods:{filter:(c=Object(o.a)(regeneratorRuntime.mark((function t(e){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.$store.getters.getContext.token,c=[],c="ASC"===e.newSort?[["price",e.priceSort],["menuindex","ASC"]]:[["new","DESC"],["menuindex","ASC"]],t.next=5,this.$store.dispatch("products/fetchProducts",{params:{filter:{order:c,where:{resourcetypeId:2,level:3,parentId:this.category.id,price:{$gte:e.priceRange[0],$lte:e.priceRange[1]}},include:[{association:"productfields"},{association:"children",include:["productfields"]},"parent"]}},headers:{"x-api-key":r}});case 5:this.products=this.$store.getters["products/getProducts"];case 6:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},beforeRouteLeave:function(t,e,r){this.$store.dispatch("fetchMenu",!1),this.$store.dispatch("fetchCityModal",!1),this.$store.dispatch("fetchCallbackModal",!1),r()}},v=r(3),component=Object(v.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("main",[e("section",{staticClass:"section section--first"},[e("div",{staticClass:"container d-flex justify-center text--center"},[e("h1",{staticClass:"section--title"},[this._v(this._s(this.category.productfields.title))])])]),e("m-filter",{on:{filter:this.filter}}),e("section",{staticClass:"section"},[e("div",{staticClass:"container"},[e("div",{staticClass:"grid grid--products grid--xl-3 grid--xl-3 grid--md-2 grid--sm-2"},this._l(this.products,(function(t,i){return e("m-item-product",{key:i,attrs:{items:t}})})),1)])]),e("m-section-info")],1)}),[],!1,null,null,null);e.default=component.exports}}]);